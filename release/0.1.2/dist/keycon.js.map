{"version":3,"file":"keycon.js","sources":["../node_modules/keycode/index.js","../src/KeyController.ts"],"sourcesContent":["// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\n\nfunction keyCode(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === typeof searchInput) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode\n    if (hasKeyCode) searchInput = hasKeyCode\n  }\n\n  // Numbers\n  if ('number' === typeof searchInput) return names[searchInput]\n\n  // Everything else (cast to string)\n  var search = String(searchInput)\n\n  // check codes\n  var foundNamedKey = codes[search.toLowerCase()]\n  if (foundNamedKey) return foundNamedKey\n\n  // check aliases\n  var foundNamedKey = aliases[search.toLowerCase()]\n  if (foundNamedKey) return foundNamedKey\n\n  // weird character?\n  if (search.length === 1) return search.charCodeAt(0)\n\n  return undefined\n}\n\n/**\n * Compares a keyboard event with a given keyCode or keyName.\n *\n * @param {Event} event Keyboard event that should be tested\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Boolean}\n * @api public\n */\nkeyCode.isEventKey = function isEventKey(event, nameOrCode) {\n  if (event && 'object' === typeof event) {\n    var keyCode = event.which || event.keyCode || event.charCode\n    if (keyCode === null || keyCode === undefined) { return false; }\n    if (typeof nameOrCode === 'string') {\n      // check codes\n      var foundNamedKey = codes[nameOrCode.toLowerCase()]\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n\n      // check aliases\n      var foundNamedKey = aliases[nameOrCode.toLowerCase()]\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n    } else if (typeof nameOrCode === 'number') {\n      return nameOrCode === keyCode;\n    }\n    return false;\n  }\n}\n\nexports = module.exports = keyCode;\n\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'left command': 91,\n  'right command': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222\n}\n\n// Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '⇧': 16,\n  '⌥': 18,\n  '⌃': 17,\n  '⌘': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'spacebar': 32,\n  'pgup': 33,\n  'pgdn': 34,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n}\n\n/*!\n * Programatically add the following\n */\n\n// lower case chars\nfor (i = 97; i < 123; i++) codes[String.fromCharCode(i)] = i - 32\n\n// numbers\nfor (var i = 48; i < 58; i++) codes[i - 48] = i\n\n// function keys\nfor (i = 1; i < 13; i++) codes['f'+i] = i + 111\n\n// numpad keys\nfor (i = 0; i < 10; i++) codes['numpad '+i] = i + 96\n\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\nvar names = exports.names = exports.title = {} // title for backward compat\n\n// Create reverse mapping\nfor (i in codes) names[codes[i]] = i\n\n// Add aliases\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias]\n}\n","import Component from \"@egjs/component\";\nimport { names } from \"keycode\";\nimport { isString } from \"@daybrush/utils\";\n\nconst codeData = {\n    \"+\": \"plus\",\n    \"left command\": \"meta\",\n    \"right command\": \"meta\",\n};\nfunction getKey(keyCode: number) {\n    let key = names[keyCode] || \"\";\n\n    for (const name in codeData) {\n        key = key.replace(name, codeData[name]);\n    }\n\n    return key.replace(/\\s/g, \"\");\n}\nexport interface KeyControllerEvent {\n    inputEvent: KeyboardEvent;\n    key: string;\n    keyCode: number;\n    ctrlKey: boolean;\n    altKey: boolean;\n    shiftKey: boolean;\n    metaKey: boolean;\n}\nexport class KeyController extends Component {\n    constructor(container: Window | Document | HTMLElement = window) {\n        super();\n\n        container.addEventListener(\"keydown\", this.keydownEvent);\n        container.addEventListener(\"keyup\", this.keyupEvent);\n    }\n    public keydown(comb: string, callback: (e: KeyControllerEvent) => void): this;\n    public keydown(callback: (e: KeyControllerEvent) => void): this;\n    public keydown(\n        comb: string | ((e: KeyControllerEvent) => void),\n        callback?: (e: KeyControllerEvent) => void,\n    ) {\n        if (isString(comb)) {\n            return this.on(`keydown.${comb}`, callback);\n        } else {\n            return this.on(`keydown`, callback);\n        }\n    }\n    public keyup(comb: string, callback: (e: KeyControllerEvent) => void): this;\n    public keyup(callback: (e: KeyControllerEvent) => void): this;\n    public keyup(\n        comb: string | ((e: KeyControllerEvent) => void),\n        callback?: (e: KeyControllerEvent) => void,\n    ) {\n        if (typeof comb === \"string\") {\n            return this.on(`keyup.${comb}`, callback);\n        } else {\n            return this.on(`keyup`, callback);\n        }\n    }\n    private triggerEvent(type: \"keydown\" | \"keyup\", e: KeyboardEvent) {\n        const key = getKey(e.keyCode);\n        const param: KeyControllerEvent = {\n            key,\n            inputEvent: e,\n            keyCode: e.keyCode,\n            ctrlKey: e.ctrlKey,\n            altKey: e.altKey,\n            shiftKey: e.shiftKey,\n            metaKey: e.metaKey,\n        };\n        this.trigger(type, param);\n        this.trigger(`${type}.${key}`, param);\n    }\n    private keydownEvent = (e: KeyboardEvent) => {\n        this.triggerEvent(\"keydown\", e);\n    }\n    private keyupEvent = (e: KeyboardEvent) => {\n        this.triggerEvent(\"keyup\", e);\n    }\n}\n\nexport default function keycon(container: Window | Document | HTMLElement) {\n    return new KeyController(container);\n}\n"],"names":["keyCode","searchInput","hasKeyCode","which","charCode","names","foundNamedKey","search","String","codes","toLowerCase","aliases","length","charCodeAt","isEventKey","event","nameOrCode","exports","module","i","fromCharCode","alias","codeData","container","_super","_this","e","triggerEvent","addEventListener","keydownEvent","keyupEvent","tslib_1","comb","callback","isString","this","on","type","key","name","replace","getKey","param","inputEvent","ctrlKey","altKey","shiftKey","metaKey","trigger","Component","KeyController"],"mappings":"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"}