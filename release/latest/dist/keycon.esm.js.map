{"version":3,"file":"keycon.esm.js","sources":["../src/KeyController.ts"],"sourcesContent":["import Component from \"@egjs/component\";\nimport { names } from \"keycode\";\n\nconst codeData = {\n    \"+\": \"plus\",\n    \"left command\": \"meta\",\n    \"right command\": \"meta\",\n};\nfunction getKey(keyCode: number) {\n    let key = names[keyCode] || \"\";\n\n    for (const name in codeData) {\n        key = key.replace(name, codeData[name]);\n    }\n\n    return key.replace(/\\s/g, \"\");\n}\n\nclass KeyController extends Component {\n    constructor() {\n        super();\n\n        window.addEventListener(\"keydown\", this.keydownEvent);\n        window.addEventListener(\"keyup\", this.keyupEvent);\n    }\n    public keydown(comb: string, callback: (e: KeyboardEvent) => void) {\n        return this.on(`keydown.${comb}`, callback);\n    }\n    public keyup(comb: string, callback: (e: KeyboardEvent) => void) {\n        return this.on(`keyup.${comb}`, callback);\n    }\n    private triggerEvent(type: \"keydown\" | \"keyup\", e: KeyboardEvent) {\n        const key = getKey(e.keyCode);\n\n        this.trigger(`${type}.${key}`, {\n            ctrlKey: e.ctrlKey,\n            altKey: e.altKey,\n            shiftKey: e.shiftKey,\n            metaKey: e.metaKey,\n        });\n    }\n    private keydownEvent = (e: KeyboardEvent) => {\n        this.triggerEvent(\"keydown\", e);\n    }\n    private keyupEvent = (e: KeyboardEvent) => {\n        this.triggerEvent(\"keyup\", e);\n    }\n}\n\nexport default function keycon() {\n    return new KeyController();\n}\n"],"names":["codeData","getKey","keyCode","key","names","name","replace","tslib_1","_super","_this","e","triggerEvent","window","addEventListener","keydownEvent","keyupEvent","comb","callback","on","type","trigger","ctrlKey","altKey","shiftKey","metaKey","Component","keycon","KeyController"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,QAAQ,GAAG;OACR,MADQ;kBAEG,MAFH;mBAGI;CAHrB;;AAKA,SAASC,MAAT,CAAgBC,OAAhB;MACQC,GAAG,GAAGC,KAAK,CAACF,OAAD,CAAL,IAAkB,EAA5B;;OAEK,IAAMG,IAAX,IAAmBL,QAAnB,EAA6B;IACzBG,GAAG,GAAGA,GAAG,CAACG,OAAJ,CAAYD,IAAZ,EAAkBL,QAAQ,CAACK,IAAD,CAA1B,CAAN;;;SAGGF,GAAG,CAACG,OAAJ,CAAY,KAAZ,EAAmB,EAAnB,CAAP;;;AAGJ;;;EAA4BC,SAAA,cAAA,QAAA;;wBACxB;gBACIC,WAAA,KAAA,SADJ;;IAsBQC,kBAAA,GAAe,UAACC,CAAD;MACnBD,KAAI,CAACE,YAAL,CAAkB,SAAlB,EAA6BD,CAA7B;KADI;;IAGAD,gBAAA,GAAa,UAACC,CAAD;MACjBD,KAAI,CAACE,YAAL,CAAkB,OAAlB,EAA2BD,CAA3B;KADI;;IAtBJE,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCJ,KAAI,CAACK,YAAxC;IACAF,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCJ,KAAI,CAACM,UAAtC;;;;;;iBAEG,GAAP,UAAeC,IAAf,EAA6BC,QAA7B;WACW,KAAKC,EAAL,CAAQ,aAAWF,IAAnB,EAA2BC,QAA3B,CAAP;GADG;;eAGA,GAAP,UAAaD,IAAb,EAA2BC,QAA3B;WACW,KAAKC,EAAL,CAAQ,WAASF,IAAjB,EAAyBC,QAAzB,CAAP;GADG;;sBAGC,GAAR,UAAqBE,IAArB,EAAgDT,CAAhD;QACUP,GAAG,GAAGF,MAAM,CAACS,CAAC,CAACR,OAAH,CAAlB;SAEKkB,OAAL,CAAgBD,IAAI,MAAJ,GAAQhB,GAAxB,EAA+B;MAC3BkB,OAAO,EAAEX,CAAC,CAACW,OADgB;MAE3BC,MAAM,EAAEZ,CAAC,CAACY,MAFiB;MAG3BC,QAAQ,EAAEb,CAAC,CAACa,QAHe;MAI3BC,OAAO,EAAEd,CAAC,CAACc;KAJf;GAHI;;sBAgBZ;EA7B4BC,UAA5B;;AA+BA,SAAwBC;SACb,IAAIC,aAAJ,EAAP;;;;;"}